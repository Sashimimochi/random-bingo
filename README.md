# ランダム封印縛りビンゴ

## これなに？
ゲームプレイにおいて、特定のアイテムや要素をランダムに封印（制限）するための抽選ツールです。
ルーレット形式で順次アイテムを抽選し、封印されたアイテムをリスト管理できます。

**デモサイト**: [Random-Bingo](https://random-bingo.netlify.app/)

---

## 主な機能

### 1. ランダム抽選機能
- 数値範囲（Min/Max）を指定した抽選
- ルーレット形式の視覚的な抽選演出
- 抽選済みアイテムは自動的に除外

### 2. アイテム管理
- Excelファイルで抽選リストをカスタマイズ
- アイテムごとに名前、説明、重要度、レア度を設定可能
- 抽選履歴をExcelファイルで保存・復元

### 3. 封印リスト表示
- 抽選済みアイテムの一覧表示
- キーワード検索機能
- アイテム詳細情報の表示（名前、説明、重要度、レア度）

---

## 使い方

### 基本操作

#### 抽選を開始/停止する
1. 画面中央の **Start** ボタンをクリックしてルーレットを開始
2. **Stop** ボタンをクリックして抽選を確定
3. 当選したアイテムが大きく表示され、封印リストに追加されます

#### 抽選結果をリセットする
1. **Clear** ボタンをクリック
2. 確認ダイアログで「OK」を選択すると、すべての抽選結果がクリアされます

### 設定の変更

#### 数値範囲（Min/Max）を指定する
1. 画面右上のメニューアイコンをクリックして設定パネルを開く
2. **Min** と **Max** の値を入力
   - Min: 抽選範囲の最小値（0以上の整数）
   - Max: 抽選範囲の最大値（Minより大きい整数）
3. **Save** ボタンをクリックして設定を反映
4. **Close** ボタンで設定パネルを閉じる

#### Excelファイルで抽選リストをカスタマイズする
Excelファイルをアップロードすることで、アイテムの詳細情報を設定できます。

**手順:**
1. 画面右上のメニューアイコンをクリックして設定パネルを開く
2. **Upload** ボタンをクリック
3. Excelファイル（.xlsx形式）を選択
4. 設定パネルが自動的に閉じ、アップロードした内容が反映されます

**Excelファイルのフォーマット:**

| id | name | importance | rarity | description | hit |
|:---|:-----|:-----------|:-------|:------------|:----|
| 1 | アイテムA | S | SSS | 重要なアイテム | 0 |
| 2 | アイテムB | A | SS | 普通のアイテム | 1 |
| 3 | アイテムC | B | S | よくあるアイテム | 0 |

**各カラムの説明:**
- **id** (必須): アイテムの一意な識別番号（整数、昇順推奨）
- **name** (必須): アイテム名
- **importance** (必須): 重要度（例: S, A, B, C など）
- **rarity** (必須): レア度（例: SSS, SS, S など）
- **description** (必須): アイテムの説明
- **hit** (任意): 既に抽選済みの場合は `1`、未抽選の場合は `0` または空欄

> **注意:** サーバーにファイルがアップロードされることはありませんが、個人情報などのデリケートなデータは含めないでください。

### 抽選状態の保存と復元

#### 現在の状態を保存する
ブラウザを閉じたりリロードすると、抽選結果がリセットされます。
中断して後で続きから再開するには、現在の状態を保存してください。

1. 設定パネルを開く
2. **Download** ボタンをクリック
3. `out.xlsx` という名前でExcelファイルがダウンロードされます
4. このファイルには抽選済みアイテムに `hit=1` のフラグが付いています

> **注意:** Excelファイルで抽選リストを設定している場合のみ保存機能が利用できます。

#### 保存した状態を復元する
1. ダウンロードした `out.xlsx` を再度アップロード
2. 抽選済みアイテム（`hit=1`）が自動的に封印リストに反映されます

### 封印リストの検索
1. 封印リストエリアの検索ボックスにキーワードを入力
2. アイテム名に一致するものが絞り込まれて表示されます

---

## 開発者向け情報

### 技術スタック
- **フレームワーク**: React 18.2.0
- **UIライブラリ**: Material-UI (MUI) 5.8.6
- **Excelファイル処理**: xlsx 0.18.5
- **仮想化リスト**: react-window 1.8.7

### 必要環境
- Node.js (推奨: v14以上)
- npm または yarn

### ローカル環境での実行

#### インストール
```bash
# 依存関係のインストール
npm install
# または
yarn install
```

#### 開発サーバーの起動
```bash
npm start
# または
yarn start
```
ブラウザで `http://localhost:3000` が自動的に開きます。

#### ビルド
```bash
npm run build
# または
yarn build
```
`build/` ディレクトリに本番用のファイルが生成されます。

#### テスト
```bash
npm test
# または
yarn test
```

### プロジェクト構成
```
random-bingo/
├── public/          # 静的ファイル
├── src/
│   ├── components/  # Reactコンポーネント
│   │   ├── Bingo.js            # 抽選ロジック
│   │   ├── BingoNumber.js      # 数字表示コンポーネント
│   │   ├── BingoNumbers.js     # 数字一覧表示
│   │   ├── Buttons.js          # 各種ボタン
│   │   ├── ConfigArea.js       # 設定パネル
│   │   ├── ExcelHander.js      # Excelファイル処理
│   │   ├── Header.js           # ヘッダー
│   │   ├── ItemDetails.js      # アイテム詳細表示
│   │   ├── ItemTable.js        # アイテム情報テーブル
│   │   └── RestrictedItems.js  # 封印リスト
│   ├── utils/
│   │   └── ArrayExtention.js   # 配列ユーティリティ
│   ├── App.js       # メインアプリケーション
│   └── index.js     # エントリーポイント
├── package.json
└── README.md
```

---

## ライセンス
[LICENSE](LICENSE) を参照してください。

## 参考リポジトリ
[nishiurahiroki/bingo-game-made-with-react](https://github.com/nishiurahiroki/bingo-game-made-with-react)
